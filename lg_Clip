from fastapi import FastAPI, HTTPException
import logging

app = FastAPI()

# Enable logging
logging.basicConfig(level=logging.INFO, format="%(asctime)s - %(message)s")

@app.post("/device-event/")
async def receive_device_event(event: dict):
    device_id = event.get("device_id")
    event_type = event.get("event_type")
    data = event.get("data")

    if not device_id or not event_type:
        raise HTTPException(status_code=400, detail="Missing device_id or event_type")

    logging.info(f"ðŸ”” Event received - Device ID: {device_id}, Type: {event_type}, Data: {data}")

    return {"status": "Event received"}